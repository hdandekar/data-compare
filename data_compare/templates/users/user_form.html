{% extends "app_base.html" %}

{% load crispy_forms_tags %}

{% block title %}
  {{ user.name }}
{% endblock title %}
{% block content %}
  <section class="section container">
    <div class="columns container">
      <form class="form-horizontal"
            enctype="multipart/form-data"
            method="post"
            action="{% url 'users:update' %}">
        {% csrf_token %}
        <div class="row">
          <div class="col-md-2">
            <div class="d-flex flex-column align-items-center text-center p-3 py-5">
              <img class="rounded-circle mt-5"
                   alt="profile photo"
                   src="{% if user.avatar %} {{ user.avatar.url }} {% endif %}"
                   width="90" />
              <span class="font-weight-bold">{{ user.username }}</span>
              <span class="text-black-50">{{ user.email }}</span>
              <span>{{ user.designation }}</span>
            </div>
          </div>
          <div class="col-md-1"></div>
          <div class="col-md-6">
            <div class="form-group">
              <label class="required form-label" for="id_name">Name</label>
              <input type="text"
                     name="name"
                     id="id_name"
                     class="form-control form-control-sm"
                     autofocus=""
                     value="{{ user.name }}" />
            </div>
            <div class="form-group">
              <label class="required form-label" for="id_email">Email</label>
              <input type="text"
                     name="email"
                     id="id_email"
                     class="form-control form-control-sm"
                     required=""
                     autofocus=""
                     value="{{ user.email }}" />
              {{ form.email.errors }}
            </div>
            <div class="form-group">
              <label class="required form-label" for="id_designation">Designation</label>
              <input type="text"
                     name="designation"
                     id="id_designation"
                     class="form-control form-control-sm"
                     autofocus=""
                     value="{{ user.designation }}" />
              {{ form.designation.errors }}
            </div>
            <div class="form-group">
              <label class="form-label" for="id_website">Website</label>
              <input type="text"
                     name="website"
                     id="id_website"
                     class="form-control form-control-sm"
                     autofocus=""
                     value="{{ user.website|default_if_none:'' }}" />
              {{ form.website.errors }}
            </div>
            <div class="form-group">
              <label class="form-label" for="id_github_link">Github</label>
              <input type="text"
                     name="github_link"
                     id="id_github_link"
                     class="form-control form-control-sm"
                     autofocus=""
                     value="{{ user.github_link|default_if_none:'' }}" />
            </div>
            <div class="form-group">
              <label class="required form-label" for="id_twitter_link">Twitter</label>
              <input type="text"
                     name="twitter_link"
                     id="id_twitter_link"
                     class="form-control form-control-sm"
                     autofocus=""
                     value="{{ user.twitter_link|default_if_none:'' }} " />
            </div>
            <div class="form-group">
              <label class="required form-label" for="id_mobile_number">Mobile Number</label>
              <input type="text"
                     name="mobile_number"
                     id="mobile_number"
                     class="form-control form-control-sm"
                     autofocus=""
                     value="{{ user.mobile_number|default_if_none:'' }} " />
            </div>
            <div class="form-group">
              <label class="required form-label" for="id_address">Office Location</label>
              <input type="text"
                     name="address"
                     id="address"
                     class="form-control form-control-sm"
                     autofocus=""
                     value="{{ user.address }}" />
            </div>
            <div class="form-group">
              <label for="id_avatar form-label-sm" class="form-label form-label-sm">
                Avatar:
                {% if user.avatar %}<a href="{{ user.avatar.url }}">{{ user.filename }}</a>{% endif %}
              </label>
              <input type="file"
                     accept="image/*"
                     name="avatar"
                     id="id_avatar"
                     class="form-control form-control-sm"
                     value="{{ user.filename }}" />
            </div>
            <div class="row mt-2">
              <div class="col">
                <button class="btn btn-primary btn-sm" type="submit">Update</button>
              </div>
            </div>
          </div>
        </form>
      </div>
    </div>
  </section>
{% endblock content %}
