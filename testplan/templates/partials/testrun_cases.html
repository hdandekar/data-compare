<table class="table table-striped table-bordered table-xs smaller"
       aria-label="Project List">
  <thead class="thead-dark small">
    <tr>
      {% comment %} <th scope="col-1">ID</th> {% endcomment %}
      <th class="sortable col-sm-1 text-center">Test Case Name</th>
      <th class="sortable hidden-xs col-1 text-center">Latest Status</th>
      <th class="sortable hidden-xs col-1 text-center">Latest Executed By</th>
      <th class="hidden-xs col-sm-1 text-center">Latest Execution Start</th>
      <th class="hidden-xs col-sm-1 text-center">Latest Execution End</th>
      <th class="hidden-xs col-sm-3 text-center">Log</th>
    </tr>
  </thead>
  <tbody>
    {% for item in most_recent_testcase_runs %}
      <tr>
        <td class="col-sm-1">
          <a class="px-1 link-undecorate"
             title="Edit"
             href="{% url 'edit_testcase' item.testrun_testcase.testcases.project.id item.testrun_testcase.testcases.id %}">
            <i class="fa fa-pen-to-square fa-fw fa-xs"></i>
          </a>
          <a class="px-1 confirm-delete link-undecorate"
             title="Delete"
             data-bs-title="Delete Test Case"
             data-bs-toggle="tooltip"
             data-bs-placement="right"
             hx-post="{% url 'delete_testrun_testcase' item.testrun_testcase.testcases.project.id item.testrun_testcase.testrun.id item.testrun_testcase.id %}"
             hx-headers='{"X-CSRFToken":"{{ csrf_token }}"}'>
            <i class="fa fa-trash fa-fw fa-xs text-danger" aria-hidden="true"></i>
          </a>
          <a class="px-1 confirm-delete link-undecorate"
             title="Execute"
             data-bs-title="Delete Test Case"
             data-bs-toggle="tooltip"
             data-bs-placement="right"
             hx-post="{% url 'execute_testcase' item.testrun_testcase.testcases.project.id item.testrun_testcase.testrun.id item.testrun_testcase.id %}"
             hx-headers='{"X-CSRFToken":"{{ csrf_token }}"}'>
            <i class="fa-solid fa-caret-right fa-xl text-success"></i>
          </a>
          {{ item.testrun_testcase.testcases.tcname }}
        </td>
        {% if item.most_recent_testcase_run %}
          <td class="col-sm-1 text-center">{{ item.most_recent_testcase_run.run_status.status_value }}</td>
          <td class="col-sm-1 text-center">{{ item.most_recent_testcase_run.triggered_by }}</td>
          <td class="col-sm-1 text-center">{{ item.most_recent_testcase_run.execution_start|date:"d-M-y H:m:s T" }}</td>
          <td class="col-sm-1 text-center">{{ item.most_recent_testcase_run.execution_end|date:"d-M-y H:m:s T" }}</td>
          <td class="col-sm-3">{{ item.most_recent_testcase_run.comments|truncatewords:200 }}</td>
        {% else %}
          <td class="col-sm-1 text-center">Not Run</td>
          <td class="col-sm-1 text-center"></td>
          <td class="col-sm-1 text-center"></td>
          <td class="col-sm-1 text-center"></td>
          <td class="col-sm-3"></td>
        {% endif %}
      </tr>
    {% endfor %}
  </tbody>
</table>
